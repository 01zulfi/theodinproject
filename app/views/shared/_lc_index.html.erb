<!--
This partial displays the checkbox at the left of a lesson on the index page
It will also be rendered with the unobtrusive javascript that is used with the 
AJAX form which allows the user to do the checking and unchecking 
(so once on initial page load and again any time the user clicks the
checkbox).
-->


<div class="lc-checkbox-wrapper">     
  <%= form_for LessonCompletion.new, :method => "POST", :remote => true do |f| %>
    <a href="#" id="lc-id-<%= lesson.id %>" class="lc-checkbox lc-unchecked">
      <%= hidden_field_tag(:lesson_id, lesson.id) %>
      <%= hidden_field_tag(:index, true) %>
    </a>
  <% end %>                       
</div>

<!--
    <% @lesson = lesson %>
  <% if user_signed_in? %>
  
    <% if current_user.completed_lessons.include?(@lesson) %>

      <div class="checkbox-container lc-checked">

        <h3>
          <%= @lesson.is_project ? "Project" : "Lesson" %> Completed
        </h3>
      </div>  
      <%= form_tag lesson_completion_path(:lesson_id => @lesson.id), :method => "DELETE", :remote => true do %>
        <%= link_to "Change #{@lesson.is_project ? 'project' : 'lesson'} to not completed", "#", :class => "lc-uncomplete-link" %>
      <% end %>
    <% else %>

      <%= form_for LessonCompletion.new, :method => "POST", :remote => true do |f| %>
        <a href="#" class="checkbox-container lc-unchecked">
          <%= hidden_field_tag(:lesson_id, @lesson.id) %>
          <h3>
            Mark <%= @lesson.is_project ? "Project" : "Lesson" %> Completed
          </h3>
        </a>
      <% end %>

    <% end %>
  
  <% else %>

      <div class="checkbox-container lc-disabled">            
          <h3>
            Mark <%= @lesson.is_project ? "Project" : "Lesson" %> Completed
          </h3>
      </div>

    <%= link_to "Sign in to track your progress", login_path, :class => "lc-signin-link" %> 
  <% end %>
<div class="lc-hover"></div>
<div class="lc-waiting"></div>
-->